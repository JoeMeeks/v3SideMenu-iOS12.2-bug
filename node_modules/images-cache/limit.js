/*

var qlimit = require('qlimit');
var Q = require('q');

var limit = qlimit(5);

function performOperationOnItem(item) {
  console.log('start', item);
  return Q.delay(200).then(function() {
    console.log('done', item);
  });
}

var items = [];
for (var i=0; i<50;i++) {
  items.push(i);
}

Q.all(items.map(limit(function(item) {
  return performOperationOnItem(item);
})));
*/

var cache = require('./src');

var items = [];
for (var i=0; i<50;i++) {
  items.push(`http://test/${i}.jpg`);
}

cache.load(items).progress(progress => {
  console.log('progress', progress.loaded);
}).then(() => {
  console.log('done');
});
